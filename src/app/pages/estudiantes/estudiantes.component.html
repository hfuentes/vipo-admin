<h1>Administrador Estudiantes</h1>
<div class="position-relative">
  <div class="position-absolute top-0 end-0">
    <a href="https://youtu.be/Kip5JcKfaeM" target="black">
      <span class="badge rounded-pill bg-dark"><b><i class="icon-bulb-idea"></i></b> Ayuda</span>
    </a>
  </div>
</div>
<p class="lead">
  Administrará la lista de Estudiantes y Tesis
</p>
<hr>
<app-error-handler [loading]="loadSettings.loading" [error]="loadSettings.error">
  <h3>Estudiantes</h3>
  <form [formGroup]="formEstudiantes" (ngSubmit)="onSubmitEstudiantes()">
    <div class="col-12 mb-3">
      <label for="nombre" class="form-label text-muted lh-1 fw-light fs-6">Nombre</label>
      <input type="text" class="form-control" id="nombre" formControlName="nombre" required>
    </div>
    <div class="col-12 mb-3">
      <label for="egreso" class="form-label text-muted lh-1 fw-light fs-6">Año</label>
      <input type="text" class="form-control" id="egreso" formControlName="egreso" required>
    </div>
    <div class="col-12 mb-3">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="publicado" formControlName="publicado">
        <label class="form-check-label" for="publicado">
          Publicado
        </label>
      </div>
    </div>
    <div class="col-12 mb-3">
      <button type="submit" class="btn btn-success"
        [disabled]="!formEstudiantes.valid">{{ formEstudiantes.value.id ? 'Editar' : 'Guardar' }}</button>
      <button type="button" class="btn btn-secondary ms-2" (click)="resetFormEstudiantes()">Reiniciar
        Formulario</button>
    </div>
  </form>
  <div class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Año</th>
          <th>Estado</th>
          <th>Creación</th>
          <th>Acción</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of estudiantes">
          <td>{{ item.nombre }}</td>
          <td>{{ item.egreso }}</td>
          <td>{{ item.publicado ? 'Publicado' : 'Archivado' }}</td>
          <td>{{ item.createdAt | date:"dd-MM-yyyy hh:mm" }}</td>
          <td>
            <i class="icon-edit-1 pe-2" title="Editar" (click)="loadEditEstudiante(item.id)"></i>
            <i class="{{ item.publicado ? 'icon-download-1' : 'icon-upload-1' }} pe-2"
              title="{{ item.publicado ? 'Archivar' : 'Publicar' }}"
              (click)="updatePublicarEstudiante(item.id, !item.publicado)"></i>
            <i class="icon-cancel-circle" title="Eliminar" (click)="deleteEstudiante(item.id)"></i>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <br><br>
  <hr>
  <h3>Tesis</h3>
  <form [formGroup]="formTesis" (ngSubmit)="onSubmitTesis()">
    <div class="col-12 mb-3">
      <label for="titulo" class="form-label text-muted lh-1 fw-light fs-6">Título</label>
      <input type="text" class="form-control" id="titulo" formControlName="titulo" required>
    </div>
    <div class="col-12 mb-3">
      <label for="autor" class="form-label text-muted lh-1 fw-light fs-6">Autor</label>
      <input type="text" class="form-control" id="autor" formControlName="autor" required>
    </div>
    <div class="col-12 mb-3">
      <label for="publicacion" class="form-label text-muted lh-1 fw-light fs-6">Año</label>
      <input type="text" class="form-control" id="publicacion" formControlName="publicacion" required>
    </div>
    <div class="col-12 mb-3">
      <label for="profesor" class="form-label text-muted lh-1 fw-light fs-6">Profesor</label>
      <input type="text" class="form-control" id="profesor" formControlName="profesor" required>
    </div>
    <div class="col-12 mb-3">
      <label for="tutor" class="form-label text-muted lh-1 fw-light fs-6">Tutor</label>
      <input type="text" class="form-control" id="tutor" formControlName="tutor">
    </div>
    <div class="col-12 mb-3">
      <label for="coautor" class="form-label text-muted lh-1 fw-light fs-6">Coautor</label>
      <input type="text" class="form-control" id="coautor" formControlName="coautor">
    </div>
    <div class="col-12 mb-3">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="publicado" formControlName="publicado">
        <label class="form-check-label" for="publicado">
          Publicado
        </label>
      </div>
    </div>
    <div class="col-12 mb-3">
      <button type="submit" class="btn btn-success"
        [disabled]="!formTesis.valid">{{ formTesis.value.id ? 'Editar' : 'Guardar' }}</button>
      <button type="button" class="btn btn-secondary ms-2" (click)="resetFormTesis()">Reiniciar
        Formulario</button>
    </div>
  </form>
  <div class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>Título</th>
          <th>Autor</th>
          <th>Profesor</th>
          <th>Tutor</th>
          <th>Coautor</th>
          <th>Año</th>
          <th>Creación</th>
          <th>Acción</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of tesis">
          <td>{{ item.titulo }}</td>
          <td>{{ item.autor }}</td>
          <td>{{ item.profesor }}</td>
          <td>{{ item.tutor }}</td>
          <td>{{ item.coautor }}</td>
          <td>{{ item.publicacion }}</td>
          <td>{{ item.publicado ? 'Publicado' : 'Archivado' }}</td>
          <td>{{ item.createdAt | date:"dd-MM-yyyy hh:mm" }}</td>
          <td>
            <i class="icon-edit-1 pe-2" title="Editar" (click)="loadEditTesis(item.id)"></i>
            <i class="{{ item.publicado ? 'icon-download-1' : 'icon-upload-1' }} pe-2"
              title="{{ item.publicado ? 'Archivar' : 'Publicar' }}"
              (click)="updatePublicarTesis(item.id, !item.publicado)"></i>
            <i class="icon-cancel-circle" title="Eliminar" (click)="deleteTesis(item.id)"></i>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</app-error-handler>
